SQL PŘÍKAZY:

CREATE DATABASE new_database;
-- ddl-end --


-- object: public.citizen | type: TABLE --
-- DROP TABLE IF EXISTS public.citizen CASCADE;
CREATE TABLE public.citizen (
	first_name varchar(60),
	middle_name varchar(50),
	last_name varchar(50),
	nationality varchar(30),
	birth_place varchar(50),
	birth_number smallint NOT NULL,
	sex varchar(15),
	marital_status varchar(20),
	phone_number varchar(30),
	email_adress varchar(50),
	reference_number_adress smallint,
	CONSTRAINT citizen_pk PRIMARY KEY (birth_number)

);
-- ddl-end --
ALTER TABLE public.citizen OWNER TO postgres;
-- ddl-end --

-- object: public.adress | type: TABLE --
-- DROP TABLE IF EXISTS public.adress CASCADE;
CREATE TABLE public.adress (
	street_name varchar(30),
	street_number smallint,
	reference_number smallint NOT NULL,
	city varchar(30),
	city_district varchar(30),
	zip_code smallint,
	apartment_floor smallint,
	apartment smallint,
	CONSTRAINT adress_pk PRIMARY KEY (reference_number)

);
-- ddl-end --
ALTER TABLE public.adress OWNER TO postgres;
-- ddl-end --

-- object: public.vaccination | type: TABLE --
-- DROP TABLE IF EXISTS public.vaccination CASCADE;
CREATE TABLE public.vaccination (
	status varchar(10),
	vaccination_id smallint NOT NULL,
	disease_name varchar(50),
	vaccine_type varchar(20),
	vaccination_place varchar(50),
	vaccination_date date,
	vaccine_doses smallint,
	vacc_family_status varchar(70),
	medical_conditions varchar(60),
	submitted_by varchar(60),
	submission_date smallint,
	expiration smallint,
	birth_number_citizen smallint,
	CONSTRAINT vaccination_pk PRIMARY KEY (vaccination_id)

);
-- ddl-end --
ALTER TABLE public.vaccination OWNER TO postgres;
-- ddl-end --

-- object: public.vaccine | type: TABLE --
-- DROP TABLE IF EXISTS public.vaccine CASCADE;
CREATE TABLE public.vaccine (
	vaccine_id smallint NOT NULL,
	vaccine_name smallint,
	type varchar(60),
	description varchar(80),
	preparation varchar(80),
	brand_name varchar(60),
	valid_start_date date,
	use_start_date date,
	use_end_date date,
	valid_end_date date,
	vaccination_id_vaccination smallint,
	CONSTRAINT vaccine_pk PRIMARY KEY (vaccine_id)

);
-- ddl-end --
ALTER TABLE public.vaccine OWNER TO postgres;
-- ddl-end --

-- object: public.host_response | type: TABLE --
-- DROP TABLE IF EXISTS public.host_response CASCADE;
CREATE TABLE public.host_response (
	host_response_id smallint NOT NULL,
	side_effects varchar(60),
	immune_response varchar(60),
	CONSTRAINT host_response_pk PRIMARY KEY (host_response_id)

);
-- ddl-end --
ALTER TABLE public.host_response OWNER TO postgres;
-- ddl-end --

-- object: adress_fk | type: CONSTRAINT --
-- ALTER TABLE public.citizen DROP CONSTRAINT IF EXISTS adress_fk CASCADE;
ALTER TABLE public.citizen ADD CONSTRAINT adress_fk FOREIGN KEY (reference_number_adress)
REFERENCES public.adress (reference_number) MATCH FULL
ON DELETE SET NULL ON UPDATE CASCADE;
-- ddl-end --

-- object: citizen_uq | type: CONSTRAINT --
-- ALTER TABLE public.citizen DROP CONSTRAINT IF EXISTS citizen_uq CASCADE;
ALTER TABLE public.citizen ADD CONSTRAINT citizen_uq UNIQUE (reference_number_adress);
-- ddl-end --

-- object: citizen_fk | type: CONSTRAINT --
-- ALTER TABLE public.vaccination DROP CONSTRAINT IF EXISTS citizen_fk CASCADE;
ALTER TABLE public.vaccination ADD CONSTRAINT citizen_fk FOREIGN KEY (birth_number_citizen)
REFERENCES public.citizen (birth_number) MATCH FULL
ON DELETE SET NULL ON UPDATE CASCADE;
-- ddl-end --

-- object: vaccination_fk | type: CONSTRAINT --
-- ALTER TABLE public.vaccine DROP CONSTRAINT IF EXISTS vaccination_fk CASCADE;
ALTER TABLE public.vaccine ADD CONSTRAINT vaccination_fk FOREIGN KEY (vaccination_id_vaccination)
REFERENCES public.vaccination (vaccination_id) MATCH FULL
ON DELETE SET NULL ON UPDATE CASCADE;
-- ddl-end --

-- object: public.many_vaccination_has_many_host_response | type: TABLE --
-- DROP TABLE IF EXISTS public.many_vaccination_has_many_host_response CASCADE;
CREATE TABLE public.many_vaccination_has_many_host_response (
	vaccination_id_vaccination smallint NOT NULL,
	host_response_id_host_response smallint NOT NULL,
	CONSTRAINT many_vaccination_has_many_host_response_pk PRIMARY KEY (vaccination_id_vaccination,host_response_id_host_response)

);
-- ddl-end --

-- object: vaccination_fk | type: CONSTRAINT --
-- ALTER TABLE public.many_vaccination_has_many_host_response DROP CONSTRAINT IF EXISTS vaccination_fk CASCADE;
ALTER TABLE public.many_vaccination_has_many_host_response ADD CONSTRAINT vaccination_fk FOREIGN KEY (vaccination_id_vaccination)
REFERENCES public.vaccination (vaccination_id) MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --

-- object: host_response_fk | type: CONSTRAINT --
-- ALTER TABLE public.many_vaccination_has_many_host_response DROP CONSTRAINT IF EXISTS host_response_fk CASCADE;
ALTER TABLE public.many_vaccination_has_many_host_response ADD CONSTRAINT host_response_fk FOREIGN KEY (host_response_id_host_response)
REFERENCES public.host_response (host_response_id) MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --




);
